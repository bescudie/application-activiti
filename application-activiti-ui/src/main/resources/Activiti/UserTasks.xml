<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc>
  <web>Activiti</web>
  <name>UserTasks</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <parent>Published.WebHome</parent>
  <creator>xwiki:XWiki.Admin</creator>
  <author>xwiki:XWiki.Admin</author>
  <customClass/>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <creationDate>1366587466000</creationDate>
  <date>1368987914000</date>
  <contentUpdateDate>1367162628000</contentUpdateDate>
  <version>1.1</version>
  <title>User Tasks</title>
  <template/>
  <defaultTemplate/>
  <validationScript/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{velocity}}
#if(!$isGuest)
  #if($request.claimTask)
    $services.activiti.task.claimTask($request.claimTask)
    $response.sendRedirect($request.xredirect)
  #end


#set($activeTasks = $services.activiti.task.getCurrentUserTasks())
== Active Tasks ==
#if(!$activeTasks.isEmpty())
  (% style="width: 99%;" %)
  |=(% style="width: 5%;" %)Task ID|=(% style="width: 15%;" %)Task Name|=(% style="width: 15%;" %)Task Creation Time|=Task Description|=(% style="width: 10%;" %)Action
  #foreach($task in $activeTasks)
    |$task.getId()|$task.getName()|$datetool.format('yyyy/MMM/dd H:mm a', $task.getCreateTime())|$task.getDescription()|[[Go to Task&gt;&gt;Activiti.TaskFormGenerator||queryString="generateFormForTaskId=$task.getId()&amp;xredirect=$escapetool.xml($xwiki.getRelativeRequestURL())"]]
  #end
#else
  {{info}}No Active Tasks{{/info}}
#end
##
#set($candidateTasks = $services.activiti.task.getCurrentUserCandidateTasks())
== Candidate Tasks ==
#if(!$candidateTasks.isEmpty())
  (% style="width: 99%;" %)
  |=(% style="width: 5%;" %)Task ID|=(% style="width: 15%;" %)Task Name|=(% style="width: 15%;" %)Task Creation Time|=Task Description|=(% style="width: 10%;" %)Action
  #foreach($task in $candidateTasks)
    |$task.getId()|$task.getName()|$datetool.format('yyyy/MMM/dd H:mm a', $task.getCreateTime())|$task.getDescription()|[[Claim Task&gt;&gt;Activiti.UserTasks||queryString="claimTask=$task.getId()&amp;xredirect=$escapetool.xml($xwiki.getRelativeRequestURL())"]]
  #end
#else
  {{info}}No Candidate Tasks{{/info}}
#end
##
#set($historicalTasks = $services.activiti.history.getCurrentUserHistoryTasks())
== Completed Tasks ==
#if(!$historicalTasks.isEmpty())
  (% style="width: 99%;" %)
  |=(% style="width: 5%;" %)Task ID|=(% style="width: 15%;" %)Task Name|=(% style="width: 15%;" %)Task Start Time|=(% style="width: 15%;" %)Task End Time|=Task Description
  #foreach($task in $historicalTasks)
    |$task.getId()|$task.getName()|$datetool.format('yyyy/MMM/dd H:mm a', $task.getStartTime())|$datetool.format('yyyy/MMM/dd H:mm a', $task.getEndTime())|$task.getDescription()
  #end
#else
  {{info}}No history of previous tasks{{/info}}
#end
##
#else
{{warning}}You must be logged in{{/warning}}
#end
{{/velocity}}</content>
</xwikidoc>
